services:
  reth-node:
    build: .
    container_name: reth-dev
    entrypoint: [ "sh", "-c", "cp /shared/reth-jwt-secret.txt /data/jwt.hex && reth node --datadir /data --http --http.addr 0.0.0.0 --http.port 8545 --http.api eth,net,web3 --ws --ws.addr 0.0.0.0 --ws.port 8546 --authrpc.addr 0.0.0.0 --authrpc.port 8551 --authrpc.jwtsecret /data/jwt.hex" ]
    ports:
      - "8545:8545"
      - "8546:8546"
      - "8551:8551"
    volumes:
      - reth-data:/data
      - jwt-tokens:/shared
    environment:
      - RUST_LOG=info,reth=info
    networks:
      - rollup-network
    restart: unless-stopped

volumes:
  reth-data:
  jwt-tokens:
    external: true

networks:
  rollup-network:
    external: true
